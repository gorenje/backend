extends layout.pug

block content
  .row
    .col-md-6
      h1 Consumers

  #events-listing

  script(src = "//cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.1/moment-with-locales.min.js")
  script(src = "//cdnjs.cloudflare.com/ajax/libs/ipaddr.js/1.5.4/ipaddr.min.js")
  script(src = "//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js")
  script(src = "//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js" )

  table#results

block inlinejs
  script.
    document.addEventListener("DOMContentLoaded", function() {
      for ( var idx = 1; idx < 13; idx++ ) {
          $.ajax({
             url: "/consumers/" +idx+"/json",
             method: 'get',
             dataType: 'json'
          }).done(function(data){
             $("table#results").append(data.tablerow);
          });
    }});

block inlinecss
  style.
    #events-listing {
      background-color:black;
      color:yellow;
      font-size:small;
    }
